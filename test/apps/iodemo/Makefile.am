#
# Copyright (C) Mellanox Technologies Ltd. 2020.  ALL RIGHTS RESERVED.
#
# See file LICENSE for terms.
#

bin_PROGRAMS = io_demo

noinst_HEADERS = \
	ucx_wrapper.h

io_demo_LDFLAGS  = -ldl

if HAVE_CUDA
io_demo_CUDA_LIBS     = $(CUDA_LIBS)
io_demo_LDFLAGS      += $(CUDA_LDFLAGS)
io_demo_CUDA_CPPFLAGS = $(CUDA_CPPFLAGS) -DHAVE_CUDA
else
io_demo_CUDA_LIBS     =
io_demo_CUDA_CPPFLAGS =
endif


io_demo_CXXFLAGS = \
	$(BASE_CXXFLAGS)

io_demo_CPPFLAGS = $(BASE_CPPFLAGS) $(io_demo_CUDA_CPPFLAGS)

io_demo_LDADD    = \
	$(top_builddir)/src/ucs/libucs.la \
	$(top_builddir)/src/ucp/libucp.la \
	$(io_demo_CUDA_LIBS)

if HAVE_NVTX
io_demo_LDADD   += \
    $(NVTX_LIBS) \
    $(top_builddir)/src/ucs/profile/nvtx/libucs_nvtx.la
endif

io_demo_SOURCES = \
	ucx_wrapper.cc \
	io_demo.cc
